(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{1434:(e,t,s)=>{Promise.resolve().then(s.bind(s,4181))},4181:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),n=s(2115),l=s(7893),r=s(6658);function i(){let[e,t]=(0,n.useState)(null),[s,a]=(0,n.useState)(!0),[l,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(""),[o,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1),u=(0,r.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/data.json"),s=await e.json();t(s)}catch(e){i("Failed to load data"),console.error("Error loading text data:",e)}finally{a(!1)}})()},[]);let p=t=>{if(t.length<=4&&/^\d*$/.test(t)&&(d(t),m(!1),4===t.length)){var s;t===(null==e?void 0:null===(s=e.password)||void 0===s?void 0:s.correctPin.join(""))?(h(!0),setTimeout(()=>{u.push("/selecter")},1e3)):(m(!0),d(""))}},[g,f]=(0,n.useState)(["","","",""]);return{fetchedTextData:e,loading:s,errorData:l,pin:c,error:o,isUnlocking:x,handlePinChange:p,handleNumPadClick:e=>{c.length<4&&p(c+e)},handleBackspace:()=>{d(e=>e.slice(0,-1)),m(!1)},getMaskedPin:e=>e.padEnd(4,"*"),pinArray:g,handleKeyInPinChange:(e,t)=>{if(t.length<=1&&/^\d*$/.test(t)){let s=[...g];if(s[e]=t,f(s),m(!1),t&&e<3){let t=document.getElementById("pin-".concat(e+1));t&&t.focus()}}},handleKeyInSubmit:()=>{var t;if(g.join("")===(null==e?void 0:null===(t=e.password)||void 0===t?void 0:t.correctPin.join("")))u.push("/selecter");else{m(!0),f(["","","",""]);let e=document.getElementById("pin-0");e&&e.focus()}},handleKeyDown:(e,t)=>{if("Backspace"===e.key&&!g[t]&&t>0){let e=document.getElementById("pin-".concat(t-1));e&&e.focus()}}}}function c(e){let{textData:t}=e,{fetchedTextData:s,loading:n,errorData:r,error:c,pinArray:d,handleKeyInPinChange:o,handleKeyInSubmit:m,handleKeyDown:x}=i();return n?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("span",{className:"loading loading-ring loading-lg text-pink-300"})}):r||!s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-2xl text-red-500",children:r||"Something went wrong"})}):(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 password-page",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(l.A,{className:"w-16 h-16 text-red-500",fill:"currentColor"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:s.password.topic}),(0,a.jsx)("p",{className:"text-lg text-gray-600",style:{fontFamily:"Kanit, serif"},children:s.password.question})]}),(0,a.jsx)("div",{className:"flex justify-center space-x-4",children:d.map((e,t)=>(0,a.jsx)("input",{id:"pin-".concat(t),type:"number",min:0,max:9,maxLength:1,value:e,onChange:e=>o(t,e.target.value),onKeyDown:e=>x(e,t),className:"w-12 h-12 text-center text-2xl border-2 rounded-lg \n                                ".concat(c?"border-red-500":"border-pink-300","\n                                focus:border-pink-500 focus:ring-2 focus:ring-pink-200 outline-none\n                                transition-colors [appearance:textfield] \n                                ").concat(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"text-white":"text-black")},t))}),c&&(0,a.jsx)("p",{className:"text-red-500 text-center text-sm",style:{fontFamily:"Kanit, serif"},children:s.password.error_message}),(0,a.jsxs)("button",{onClick:m,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 rounded-lg transform transition-all duration-200 hover:scale-105 flex items-center justify-center space-x-2",children:[(0,a.jsx)(l.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:s.password.btn_text})]})]})})}var d=s(4057);let o=(0,d.A)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),m=(0,d.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),x=(0,d.A)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);var h=s(5565);let u=e=>{let{textData:t}=e,{fetchedTextData:s,loading:l,errorData:r,pin:c,error:d,isUnlocking:u,handleNumPadClick:p,handleBackspace:g,getMaskedPin:f}=i();return l?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("span",{className:"loading loading-ring loading-lg text-pink-300"})}):r||!s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-2xl text-red-500",children:r||"Something went wrong"})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-2 sm:p-4 password-page bg-[url('/images/components/background-password.png')] bg-cover bg-center",children:(0,a.jsx)("div",{className:"w-full max-w-5xl bg-white rounded-lg shadow-lg overflow-hidden p-2 sm:p-4 md:p-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 sm:gap-6",children:[(0,a.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center",children:(0,a.jsx)(h.default,{src:s.password.image,alt:"Valentine",className:"max-w-full h-auto rounded-lg shadow-md w-[50%] sm:w-[60%] md:w-full",width:500,height:500})}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 space-y-2 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2 sm:space-y-4",children:[(0,a.jsx)("div",{className:"hidden sm:flex justify-center",children:(0,a.jsx)(h.default,{src:"/images/components/bow.png",alt:"Valentine Moment",width:60,height:60,className:"sm:w-[80px] sm:h-[80px]"})}),(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:s.password.topic}),(0,a.jsx)("p",{className:"text-sm sm:text-lg text-gray-600 px-2 sm:px-4",style:{fontFamily:"Kanit, serif"},children:s.password.question})]}),(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-6 px-2 sm:px-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u?(0,a.jsx)(o,{className:"h-5 w-5 text-green-500 transform transition-all duration-500 ".concat(u?"scale-125 rotate-12":"")}):(0,a.jsx)(m,{className:"h-5 w-5 text-gray-400 transition-all duration-300 ".concat(d?"animate-shake text-red-500":"")})}),(0,a.jsx)("input",{type:"text",value:f(c),readOnly:!0,placeholder:"****",maxLength:4,className:"w-full pl-10 pr-4 py-2 sm:py-3 text-xl sm:text-2xl rounded-lg border-2 ".concat(d?"border-red-500":u?"border-green-500":"border-pink-300"," outline-none transition-all duration-300 placeholder-gray-400 text-center font-mono tracking-[0.75em] ").concat(u?"bg-green-50":""," ").concat(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"text-white bg-gray-800":"text-gray-800 bg-white")})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 w-full max-w-xs mx-auto",children:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","back"]].map((e,t)=>(0,a.jsx)(n.Fragment,{children:e.map((e,s)=>(0,a.jsx)("button",{onClick:()=>"back"===e?g():p(e),className:"h-10 sm:h-14 w-full rounded-xl font-semibold text-lg sm:text-xl ".concat(""===e?"invisible":""," ").concat("back"===e?"bg-gray-200 hover:bg-gray-300 text-gray-700":"bg-pink-50 hover:bg-pink-100 text-gray-800 active:bg-pink-200"," transition-all duration-200 transform hover:scale-105 shadow-sm hover:shadow-md"),children:"back"===e?(0,a.jsx)(x,{className:"mx-auto w-5 h-5 sm:w-6 sm:h-6"}):e},"".concat(t,"-").concat(s)))},t))}),d&&(0,a.jsx)("p",{className:"text-red-500 text-center text-xs sm:text-sm",style:{fontFamily:"Kanit, serif"},children:s.password.error_message})]})]})]})})})};function p(){let[e,t]=(0,n.useState)(null),[s,l]=(0,n.useState)(!0),[r,i]=(0,n.useState)(null),[d,o]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/data.json"),s=await e.json();t(s),o(s.template.password||"default")}catch(e){i("Failed to load data"),console.error("Error loading text data:",e)}finally{l(!1)}})()},[]),s)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("span",{className:"loading loading-ring loading-lg text-pink-300"})}):r||!e?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-2xl text-red-500",children:r||"Something went wrong"})}):"PasswordPin"===d?(0,a.jsx)(u,{textData:e}):(0,a.jsx)(c,{textData:e})}}},e=>{var t=t=>e(e.s=t);e.O(0,[905,441,517,358],()=>t(1434)),_N_E=e.O()}]);