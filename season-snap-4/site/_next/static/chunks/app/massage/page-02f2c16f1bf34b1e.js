(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{2934:(e,t,a)=>{Promise.resolve().then(a.bind(a,6532))},6532:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),l=a(2115),n=a(5012),r=a(7893),i=a(4057);let c=(0,i.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d=(0,i.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),o=(0,i.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),x=(0,i.A)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),m=(0,i.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);function h(){let{messages:e,currentMessageIndex:t,conversationScript:a,showHint:i,textData:h,loading:u,errorData:f,handleScreenClick:p}=function(){let[e,t]=(0,l.useState)(null),[a,s]=(0,l.useState)(!0),[n,r]=(0,l.useState)(null),[i,c]=(0,l.useState)([]),[d,o]=(0,l.useState)(0),[x,m]=(0,l.useState)([]),[h,u]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/data.json"),a=await e.json();c(a.massage.conversation),t(a)}catch(e){r("Failed to load data"),console.error("Error loading text data:",e)}finally{s(!1)}})()},[]),{messages:x,currentMessageIndex:d,conversationScript:i,showHint:h,textData:e,loading:a,errorData:n,handleScreenClick:()=>{d<i.length&&(m(e=>[...e,i[d]]),o(d+1),u(!1))}}}(),g=(0,l.useRef)(null);return((0,l.useEffect)(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[e]),u)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("span",{className:"loading loading-ring loading-lg text-pink-300"})}):f||!h?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-2xl text-red-500",children:f||"Something went wrong"})}):(0,s.jsxs)("div",{className:"flex flex-col h-screen cursor-pointer massage-page",style:{backgroundImage:"url(".concat(h.massage.image||"",")")},onClick:p,children:[(0,s.jsxs)("div",{className:"bg-[#252f4a] p-4 text-white flex items-center justify-between shadow-md",children:[(0,s.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center",children:[(0,s.jsx)(n.A,{className:"w-6 h-6 transition-transform duration-300 group-hover:-translate-x-1"}),(0,s.jsx)("span",{className:"sr-only",children:"Back"})]}),(0,s.jsxs)("div",{className:"flex-1 text-center",children:[(0,s.jsx)("h1",{className:"text-xl inline",children:h.massage.header}),(0,s.jsx)(r.A,{className:"w-6 h-6 ml-2 animate-pulse inline"})]})]}),(0,s.jsxs)("div",{ref:g,className:"flex-1 flex-col-2 overflow-y-auto p-4 pb-24 space-y-4 relative scrollbar-hidden",children:[e.map(e=>(0,s.jsx)("div",{className:"flex ".concat("girl"===e.sender?"justify-end":"justify-start"," animate-fade-in-up"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"text-gray-600 text-[10px]",children:e.time}),(0,s.jsx)("div",{className:"rounded-2xl p-2 ".concat("girl"===e.sender?"bg-[#6ce131] text-black rounded-br-none":"bg-white rounded-bl-none shadow-md"),children:(0,s.jsx)("p",{className:"mb-1",children:e.text})})]})},e.id)),i&&(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2  text-gray-500 text-center animate-pulse text-xl",children:"Tap the screen..."}),t===a.length&&(0,s.jsxs)("div",{className:"text-center text-gray-500 mt-4 animate-fade-in",children:["--- ",h.massage.end," ---"]}),(0,s.jsx)("div",{className:"bg-white p-4 border-t border-pink-100 fixed bottom-0 left-0 right-0",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center text-gray-500",children:[(0,s.jsx)(c,{className:"w-6 h-6"}),(0,s.jsx)(d,{className:"w-6 h-6"}),(0,s.jsx)(o,{className:"w-6 h-6"})]}),(0,s.jsxs)("div",{className:"relative flex-1 text-gray-500",children:[(0,s.jsx)("input",{disabled:!0,placeholder:"Type a message...",className:"w-full rounded-full px-4 py-2 pl-10 pr-14 focus:outline-none focus:border-red-400"}),(0,s.jsx)(x,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-6 h-6"})]}),(0,s.jsx)(m,{className:"w-6 h-6 text-gray-500"})]})})]})]})}function u(){let{isFlap:e,isPopupOpen:t,isClosing:a,fetchedTextData:r,loading:i,errorData:c,handleEnvelopeClick:d,handleLetterClick:o,handleClosePopup:x}=function(){let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),[n,r]=(0,l.useState)(!1),[i,c]=(0,l.useState)(null),[d,o]=(0,l.useState)(!0),[x,m]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/data.json"),t=await e.json();c(t)}catch(e){m("Failed to load data"),console.error("Error loading text data:",e)}finally{o(!1)}})()},[]),{isFlap:e,isPopupOpen:a,isClosing:n,fetchedTextData:i,loading:d,errorData:x,handleEnvelopeClick:()=>{e||t(!0)},handleLetterClick:t=>{t.stopPropagation(),e&&s(!0)},handleClosePopup:()=>{r(!0),setTimeout(()=>{s(!1),r(!1)},300)}}}();return i?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("span",{className:"loading loading-ring loading-lg text-pink-300"})}):c||!r?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-2xl text-red-500",children:c||"Something went wrong"})}):(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen relative",children:[(0,s.jsx)(()=>(0,s.jsxs)("button",{onClick:()=>window.history.back(),className:"fixed top-4 left-4 sm:top-6 sm:left-6 flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full bg-white/30 backdrop-blur-sm hover:bg-white/40 transition-all duration-300 text-rose-600 font-medium shadow-lg group text-sm sm:text-base",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-300 group-hover:-translate-x-1"}),(0,s.jsx)("span",{children:"Back"})]}),{}),(0,s.jsxs)("div",{className:"envelope-wrapper ".concat(e?"flap":""),onClick:d,children:[(0,s.jsx)("div",{className:"envelope",children:(0,s.jsx)("div",{className:"letter",onClick:o,children:(0,s.jsxs)("div",{className:"text",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold text-black",children:r.massage.massage_dear}),(0,s.jsx)("p",{children:r.massage.massage_content})]})})}),(0,s.jsx)("div",{className:"heart"})]}),t&&(0,s.jsx)("div",{className:"popup-overlay ".concat(a?"fade-out":"fade-in"),onClick:x,children:(0,s.jsxs)("div",{className:"popup-letter ".concat(a?"slide-out":"slide-in"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"popup-content",children:[(0,s.jsx)("h1",{className:"font-semibold text-black",children:r.massage.massage_dear}),(0,s.jsx)("p",{children:r.massage.massage_content})]}),(0,s.jsx)("button",{className:"close-button",onClick:x,children:"\xd7"})]})})]})}function f(){let[e,t]=(0,l.useState)(null),[a,n]=(0,l.useState)(!0),[r,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/data.json"),a=await e.json();t(a),d(a.template.massage||"default")}catch(e){i("Failed to load data"),console.error("Error loading text data:",e)}finally{n(!1)}})()},[]),a)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("span",{className:"loading loading-ring loading-lg text-pink-300"})}):r||!e?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-2xl text-red-500",children:r||"Something went wrong"})}):"Chat"===c?(0,s.jsx)(h,{}):(0,s.jsx)(u,{})}a(1381)},1381:()=>{},4057:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:x,...m}=e;return(0,s.createElement)("svg",{ref:t,...r,width:l,height:l,stroke:a,strokeWidth:c?24*Number(i)/Number(l):i,className:n("lucide",d),...m},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,r)=>{let{className:c,...d}=a;return(0,s.createElement)(i,{ref:r,iconNode:t,className:n("lucide-".concat(l(e)),c),...d})});return a.displayName="".concat(e),a}},5012:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4057).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7893:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4057).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[684,441,517,358],()=>t(2934)),_N_E=e.O()}]);